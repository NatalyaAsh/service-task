# service-task

Сервис по работе с I/O bound задачами, получение ответа от которых занимает продолжительное время (3-5 минут). С помощью HTTP API можно создавать, удалять и получать результат работы задачи. Всё хранится в памяти сервиса. Серверная часть работает на порту 8080.

При запуске микросервиса запускается серверная часть. Можем к ней обратиться из браузера по адресу http://localhost:8080. 

Для добавления задачи отправляем на сервер POST запрос с временем выполнения задачи (Lasting)(т.к. мы только эмулируем долгую работу задачи). Если Lasting не указан, то используется значение по умочанию. Задаче по умолчанию устанавливается Статус "CREATED" и время создания - текущее время. Сервер вернёт сообщение в формате Json с ID новой задачи и код ответа OK. И сразу запустится таймер выполнения задачи в горутине. По истечению таймера задаче будет присвоен Статус "FINISHED".

Для получение информации о задаче отправляем на сервер GET запрос с указанием ID (Например: http://localhost:8080?id=1). Сервер вернёт сообщение в формате Json со всей информацией о задаче и код ответа OK. Если такой задачи нет, то сообщение "Такой задачи не существует".

Для удаления задачи отправляем на сервер DELETE запрос с указанием ID. Сервер вернёт сообщение в формате Json: если задача удалилась, то пустое; если задача ещё выполняется (т.е. у неё Статус "CREATED", а не "FINISHED"), то вернётся сообщение "задача ещё выполняется, её нельзя удалить" и код ответа OK.

При любых ошибках во время работы сервер отправляет сообщение об ошибке в формате Json и код ответа BadReguest.

Настройки конфигурации в /configs/main.yaml

Значения по умолчания и поля структуры задачи в /internal/models/models.go

Используем Мьютекс - механизм, который позволяет горутине на время получить эксклюзивный доступ к данным (примитив синхронизации). 
 
